<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Owenn.ca â€“ Graveyard Game</title>
<style>
/* --- Reset & Base --- */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Helvetica Neue', Arial, sans-serif; background:#0b0b0b; color:#eee; overflow:hidden; }
a { text-decoration:none; color:inherit; }

/* --- Header & Buttons --- */
header { position:fixed; top:0; left:0; width:100%; padding:0.5rem 1rem; background:rgba(0,0,0,0.7); z-index:1000; display:flex; justify-content:space-between; align-items:center; }
header button { padding:0.5rem 1rem; border:none; border-radius:5px; background:#444; color:#fff; cursor:pointer; }
header h1 { font-size:1rem; }

/* --- Graveyard Canvas --- */
#game-area { position:relative; width:100vw; height:100vh; overflow:hidden; }

/* --- Gravestone --- */
#gravestone {
  position:absolute; bottom:50px; left:50%; transform:translateX(-50%);
  width:120px; height:180px; background:#333; border-radius:10px 10px 0 0; 
  text-align:center; padding-top:10px; cursor:pointer; font-weight:bold; color:#fff;
  box-shadow: 0 0 10px rgba(255,255,255,0.5);
  transition: transform 0.3s, box-shadow 0.3s;
}
#gravestone.milestone { transform: translateX(-50%) scale(1.2); box-shadow:0 0 20px #fff; }

/* --- Collectibles --- */
.collectible {
  position:absolute; font-size:2rem; cursor:pointer;
  user-select:none;
  transition: transform 0.2s;
}

/* --- Score --- */
#score-display {
  position:fixed; top:50px; left:50%; transform:translateX(-50%);
  font-size:1.2rem; font-weight:bold;
}

/* --- Leaderboard --- */
#leaderboard {
  position:fixed; top:90px; left:50%; transform:translateX(-50%);
  background:rgba(0,0,0,0.6); padding:0.5rem 1rem; border-radius:5px;
  max-height:150px; overflow-y:auto; font-size:0.9rem;
}

/* --- Info Overlay --- */
#info-overlay {
  position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); color:#fff;
  display:none; justify-content:center; align-items:center; text-align:center; padding:2rem; z-index:2000;
}
#info-overlay button { margin-top:1rem; }

/* --- Sounds --- */
audio { display:none; }
</style>
</head>
<body>

<header>
  <button id="info-btn">i</button>
  <h1>RIP Owen Bahen (1997-2100)</h1>
  <button id="back-btn" style="display:none;">Back to Main</button>
</header>

<div id="game-area"></div>

<div id="score-display">Score: 0</div>
<div id="leaderboard"><b>Leaderboard:</b><br></div>

<div id="gravestone">ðŸª¦ Owen</div>

<div id="info-overlay">
  <h2>Graveyard Game</h2>
  <p>Collect bones ðŸ¦´ and skulls ðŸ’€! Bonus points for skeletons ðŸ¦´ðŸ¦´. Watch out for ghosts ðŸ‘»! Click the gravestone at milestones for surprises. Reach 200 points to finish.</p>
  <button id="close-info">Close</button>
</div>

<audio id="collect-sound" src="https://freesound.org/data/previews/341/341695_3248244-lq.mp3"></audio>
<audio id="milestone-sound" src="https://freesound.org/data/previews/269/269409_5121236-lq.mp3"></audio>
<audio id="win-sound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>

<script>
// --- Game Variables ---
const gameArea = document.getElementById('game-area');
const gravestone = document.getElementById('gravestone');
const scoreDisplay = document.getElementById('score-display');
const leaderboardDiv = document.getElementById('leaderboard');
const infoOverlay = document.getElementById('info-overlay');
const infoBtn = document.getElementById('info-btn');
const closeInfo = document.getElementById('close-info');
const backBtn = document.getElementById('back-btn');

let score = 0;
let collectibles = [];
let ghosts = [];
let milestoneReached = false;

// Load leaderboard
let leaderboard = JSON.parse(localStorage.getItem('graveLeaderboard')) || [];

// --- Functions ---
function updateScoreDisplay() {
  scoreDisplay.textContent = `Score: ${score}`;
}

function updateLeaderboard() {
  leaderboardDiv.innerHTML = "<b>Leaderboard:</b><br>";
  leaderboard.slice(0,5).forEach((entry,i) => {
    leaderboardDiv.innerHTML += `${i+1}. ${entry}<br>`;
  });
}

function createCollectible() {
  const emojis = ['ðŸ¦´','ðŸ’€','ðŸ¦´','ðŸ’€','ðŸ¦´','ðŸ’€','ðŸ¦´ðŸ¦´'];
  const points = [1,2,1,2,1,2,5];
  const idx = Math.floor(Math.random()*emojis.length);
  const el = document.createElement('div');
  el.className = 'collectible';
  el.textContent = emojis[idx];
  el.style.top = Math.random()*(window.innerHeight-50)+'px';
  el.style.left = Math.random()*(window.innerWidth-50)+'px';
  el.dataset.points = points[idx];
  gameArea.appendChild(el);
  collectibles.push(el);

  // Remove after random time
  setTimeout(()=>{ if(el.parentNode) el.remove(); collectibles = collectibles.filter(c=>c!==el); }, 5000 + Math.random()*5000);

  el.addEventListener('click', ()=>{
    score += Number(el.dataset.points);
    document.getElementById('collect-sound').play();
    el.remove();
    collectibles = collectibles.filter(c=>c!==el);
    updateScoreDisplay();
    checkMilestone();
  });
}

function spawnGhost() {
  const ghost = document.createElement('div');
  ghost.className = 'collectible';
  ghost.textContent = 'ðŸ‘»';
  ghost.style.fontSize = '2.5rem';
  ghost.style.top = Math.random()*(window.innerHeight-50)+'px';
  ghost.style.left = Math.random()*(window.innerWidth-50)+'px';
  gameArea.appendChild(ghost);
  ghosts.push(ghost);

  let dx = (Math.random()*2+1)*(Math.random()<0.5?-1:1);
  let dy = (Math.random()*2+1)*(Math.random()<0.5?-1:1);

  function move() {
    let top = parseFloat(ghost.style.top);
    let left = parseFloat(ghost.style.left);
    top += dy; left += dx;
    if(top<0||top>window.innerHeight-30) dy*=-1;
    if(left<0||left>window.innerWidth-30) dx*=-1;
    ghost.style.top = top+'px';
    ghost.style.left = left+'px';
    requestAnimationFrame(move);
  }
  move();

  setTimeout(()=>{ ghost.remove(); ghosts = ghosts.filter(g=>g!==ghost); }, 10000 + Math.random()*10000);
}

function checkMilestone() {
  if(score >= 3 && !milestoneReached){
    milestoneReached = true;
    gravestone.classList.add('milestone');
    backBtn.style.display='block';
    document.getElementById('milestone-sound').play();
  }
  if(score >= 200){
    alert("ðŸŽ‰ You reached 200 points! Game complete!");
    document.getElementById('win-sound').play();
    saveLeaderboard();
  }
}

function saveLeaderboard() {
  leaderboard.push(score);
  leaderboard.sort((a,b)=>b-a);
  localStorage.setItem('graveLeaderboard', JSON.stringify(leaderboard));
  updateLeaderboard();
}

// --- Game Loop ---
setInterval(()=>{
  if(Math.random()<0.7) createCollectible();
  if(Math.random()<0.05) spawnGhost();
}, 1000);

// --- Gravestone Click ---
gravestone.addEventListener('click', ()=>{
  if(score>=3){
    alert("ðŸª¦ Owen Bahen: RIP 1997-2100. Born interesting, died interesting. The gravestone whispers secrets...");
  } else {
    alert("ðŸª¦ Click collectibles first to awaken the gravestone...");
  }
});

// --- Info Overlay ---
infoBtn.addEventListener('click', ()=> infoOverlay.style.display='flex');
closeInfo.addEventListener('click', ()=> infoOverlay.style.display='none');

// --- Back Button ---
backBtn.addEventListener('click', ()=> window.location.href='index.html');

// --- Initial Display ---
updateScoreDisplay();
updateLeaderboard();
</script>

</body>
</html>
