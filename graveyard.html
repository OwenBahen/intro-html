<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Owenn.ca ‚Äì Graveyard Game</title>
<style>
/* --- Reset & Base --- */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Helvetica Neue', Arial, sans-serif; background:#111; color:#eee; overflow:hidden; }
a { text-decoration:none; color:inherit; }
button { cursor:pointer; }

/* --- Header --- */
header {
  position:fixed;
  top:0; left:0; width:100%;
  padding:0.5rem 1rem;
  background:rgba(0,0,0,0.7);
  z-index:1000;
  display:flex; justify-content:space-between; align-items:center;
}
header h1 { font-size:1.2rem; }
header button { background:#222; color:#fff; border:none; padding:0.3rem 0.6rem; border-radius:5px; }

/* --- Gravestone --- */
#gravestone {
  position:absolute;
  bottom:50px; left:50%; transform:translateX(-50%);
  width:200px; height:250px;
  background:#333; border-radius:10px 10px 0 0; border:2px solid #555;
  text-align:center; padding:1rem;
  font-weight:bold;
  box-shadow:0 0 10px #000;
}
#gravestone-message { margin-top:1rem; font-size:0.9rem; }

/* --- Scoreboard --- */
#scoreboard {
  position:fixed; top:0; right:0; padding:0.5rem 1rem;
  background:rgba(0,0,0,0.7); border-radius:0 0 0 5px; font-weight:bold;
  z-index:1000;
}

/* --- Collectibles --- */
.collectible {
  position:absolute;
  font-size:2rem;
  cursor:pointer;
  user-select:none;
  transition: transform 0.2s;
}
.skeleton { font-size:2.5rem; color:#FFD700; }
.ghost { font-size:2.5rem; color:#AAA; }

/* --- Leaderboard --- */
#leaderboard {
  position:fixed; bottom:0; left:0; width:200px;
  background:rgba(0,0,0,0.7); padding:0.5rem;
  border-radius:0 10px 0 0;
  max-height:300px; overflow-y:auto; font-size:0.9rem;
}

/* --- Info modal --- */
#infoModal {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.9); color:#fff;
  display:none; align-items:center; justify-content:center; z-index:2000;
  text-align:center; padding:1rem;
}
#infoModal p { max-width:600px; margin-bottom:1rem; }
#infoModal button { background:#222; color:#fff; border:none; padding:0.5rem 1rem; border-radius:5px; }
</style>
</head>
<body>

<header>
  <h1>Owen Bahen ‚Äì RIP 1997-2100</h1>
  <div>
    <button id="infoBtn">i</button>
    <button id="backBtn" style="display:none;">Back to Main</button>
  </div>
</header>

<div id="scoreboard">Score: 0</div>
<div id="leaderboard"><strong>Leaderboard</strong><br></div>

<div id="gravestone">
  <div>ü™¶ Owen Bahen</div>
  <div id="gravestone-message">Born interesting, died interesting.</div>
</div>

<div id="infoModal">
  <p>Collect bones üíÄ and skulls ‚ò†Ô∏è! Skeletons ü¶¥ give bonus points. Avoid ghosts üëª unless you want extra points. Reach 200 points to finish. Messages change as you progress!</p>
  <button id="closeInfo">Close</button>
</div>

<audio id="collectSound" src="https://freesound.org/data/previews/341/341695_6243102-lq.mp3"></audio>
<audio id="bonusSound" src="https://freesound.org/data/previews/320/320655_4939433-lq.mp3"></audio>

<script>
// --- Game Variables ---
let score = 0;
const maxScore = 200;
const gravestoneMessage = document.getElementById('gravestone-message');
const scoreboard = document.getElementById('scoreboard');
const gravestone = document.getElementById('gravestone');
const collectSound = document.getElementById('collectSound');
const bonusSound = document.getElementById('bonusSound');
const backBtn = document.getElementById('backBtn');

// Leaderboard
let leaderboard = JSON.parse(localStorage.getItem('graveLeaderboard')) || [];

// --- Functions ---
function updateScore(points){
  score += points;
  if(score>maxScore) score = maxScore;
  scoreboard.textContent = `Score: ${score}`;
  collectSound.play();
  updateGravestone();
  checkBackBtn();
}

function updateGravestone(){
  if(score>=200) gravestoneMessage.textContent = "All bones collected! Rest in peace.";
  else if(score>=150) gravestoneMessage.textContent = "You are a master collector!";
  else if(score>=100) gravestoneMessage.textContent = "Bones are piling up...";
  else if(score>=50) gravestoneMessage.textContent = "Keep going!";
  else if(score>=10) gravestoneMessage.textContent = "Getting started...";
}

// Show Back button after 3 points
function checkBackBtn(){
  if(score>=3) backBtn.style.display="inline-block";
}

// Spawn collectible
function spawnCollectible(){
  const types = ['üíÄ','‚ò†Ô∏è','ü¶¥'];
  const points = [1,2,5];
  const rand = Math.floor(Math.random()*types.length);
  const elem = document.createElement('div');
  elem.className = 'collectible';
  elem.textContent = types[rand];
  if(types[rand]==='ü¶¥') elem.classList.add('skeleton');
  elem.style.left = Math.random()*(window.innerWidth-50)+'px';
  elem.style.top = Math.random()*(window.innerHeight-100)+'px';
  document.body.appendChild(elem);

  // Movement speed
  let speed = 1 + Math.random()*2;
  let lifetime = 3000 + Math.random()*3000; // 3-6 sec

  const interval = setInterval(()=>{
    let x = parseFloat(elem.style.left);
    let y = parseFloat(elem.style.top);
    x += (Math.random()-0.5)*speed*5;
    y += (Math.random()-0.5)*speed*5;
    x = Math.max(0, Math.min(window.innerWidth-50, x));
    y = Math.max(50, Math.min(window.innerHeight-50, y));
    elem.style.left = x+'px';
    elem.style.top = y+'px';
  },50);

  elem.addEventListener('click',()=>{
    updateScore(points[rand]);
    if(types[rand]==='ü¶¥') bonusSound.play();
    clearInterval(interval);
    elem.remove();
    saveLeaderboard();
  });

  setTimeout(()=>{
    clearInterval(interval);
    elem.remove();
  },lifetime);
}

// Ghost
function spawnGhost(){
  const ghost = document.createElement('div');
  ghost.className = 'collectible ghost';
  ghost.textContent = 'üëª';
  ghost.style.left = Math.random()*(window.innerWidth-50)+'px';
  ghost.style.top = Math.random()*(window.innerHeight-100)+'px';
  document.body.appendChild(ghost);

  let vx = (Math.random()<0.5?-1:1)*(0.5+Math.random());
  let vy = (Math.random()<0.5?-1:1)*(0.5+Math.random());
  const interval = setInterval(()=>{
    let x = parseFloat(ghost.style.left);
    let y = parseFloat(ghost.style.top);
    x += vx*3;
    y += vy*3;
    if(x<0||x>window.innerWidth-30) vx*=-1;
    if(y<50||y>window.innerHeight-50) vy*=-1;
    ghost.style.left = x+'px';
    ghost.style.top = y+'px';
  },50);

  ghost.addEventListener('click',()=>{
    updateScore(10);
    bonusSound.play();
    clearInterval(interval);
    ghost.remove();
    saveLeaderboard();
  });

  setTimeout(()=>{
    clearInterval(interval);
    ghost.remove();
  },7000+Math.random()*5000);
}

// Leaderboard
function saveLeaderboard(){
  leaderboard.push(score);
  leaderboard.sort((a,b)=>b-a);
  if(leaderboard.length>5) leaderboard = leaderboard.slice(0,5);
  localStorage.setItem('graveLeaderboard', JSON.stringify(leaderboard));
  renderLeaderboard();
}

function renderLeaderboard(){
  const lb = document.getElementById('leaderboard');
  lb.innerHTML = '<strong>Leaderboard</strong><br>';
  leaderboard.forEach((s,i)=>{ lb.innerHTML+=`${i+1}. ${s}<br>`; });
}
renderLeaderboard();

// Spawn intervals
setInterval(spawnCollectible, 1500);
setInterval(spawnGhost, 10000);

// Info Modal
const infoModal = document.getElementById('infoModal');
document.getElementById('infoBtn').addEventListener('click',()=>infoModal.style.display='flex');
document.getElementById('closeInfo').addEventListener('click',()=>infoModal.style.display='none');

// Back button
backBtn.addEventListener('click',()=>{ window.location.href='index.html'; });

</script>

</body>
</html>
