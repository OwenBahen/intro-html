<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Owen's Graveyard Game</title>
<style>
/* Reset & Base */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Helvetica Neue', Arial, sans-serif; background:#111; color:#fff; overflow:hidden; }
a { text-decoration:none; color:inherit; }
#game-container { position:relative; width:100vw; height:100vh; overflow:hidden; background:linear-gradient(#111,#222); }

/* Grave & Ground */
#grave { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); text-align:center; }
#grave div { background:#333; padding:1rem 2rem; border-radius:10px 10px 0 0; border:3px solid #555; }
#ground { position:absolute; bottom:0; width:100%; height:50px; background:#222; border-top:2px solid #555; }

/* Score & Leaderboard */
#score-board { position:absolute; top:10px; left:10px; font-size:1.2rem; }
#leaderboard { position:absolute; top:10px; right:10px; font-size:1.1rem; text-align:right; }

/* Emoji items */
.emoji { position:absolute; font-size:2rem; cursor:pointer; user-select:none; }
.floating-text { position:absolute; font-size:1rem; color:#fff; animation:floatUp 1s ease-out forwards; }
@keyframes floatUp { 0%{opacity:1; transform:translateY(0);} 100%{opacity:0; transform:translateY(-30px);} }

/* Info Button */
#info-btn { position:absolute; top:50%; right:10px; transform:translateY(-50%); padding:0.5rem 1rem; background:#444; border:none; border-radius:5px; cursor:pointer; }
#info-box { display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#222; padding:2rem; border:2px solid #555; border-radius:10px; width:80%; max-width:400px; z-index:1000; }
#info-box h2 { margin-bottom:1rem; }
#info-box button { margin-top:1rem; padding:0.5rem 1rem; border:none; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<div id="game-container">
  <div id="score-board">Points: 0</div>
  <div id="leaderboard">Milestones:<br>10<br>25<br>50<br>100</div>

  <div id="grave">
    <div id="grave-msg">RIP 1997 â€“ 2100 "3 Century Man"<br>Born by the roadside, local fame Day 1, ended with same fame.</div>
  </div>
  <div id="ground"></div>
  <button id="info-btn">i</button>
  <div id="info-box">
    <h2>Graveyard Game</h2>
    <p>Click on emojis to collect points. Higher points appear as you reach milestones. Ghosts give 1 point per click (max 10). Spawn rate increases with your score. Grave messages evolve as you progress.</p>
    <button onclick="closeInfo()">Close</button>
  </div>
</div>

<audio id="bg-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop autoplay></audio>

<script>
// Game variables
let points = 0;
let milestoneRates = [10,25,50,100];
let spawnModifier = 1;
const gameContainer = document.getElementById('game-container');
const scoreBoard = document.getElementById('score-board');
const graveMsg = document.getElementById('grave-msg');

// Emoji Definitions
const emojis = [
  {symbol:'ðŸ¦´', points:1, minPoints:1, speed:1, type:'fall'},
  {symbol:'ðŸ’€', points:3, minPoints:3, speed:0.5, type:'rise'},
  {symbol:'ðŸ§Ÿ', points:5, minPoints:10, speed:1, type:'shuffle'},
  {symbol:'ðŸ¦‡', points:10, minPoints:30, speed:1.2, type:'zigzag'},
  {symbol:'ðŸ§›', points:25, minPoints:50, speed:2, type:'blink'},
  {symbol:'ðŸ‘»', points:1, minPoints:0, speed:1, type:'random', maxClicks:10}
];

let activeGhostClicks = 0;

// Spawn rate control
let spawnInterval = 1500;
function updateSpawnModifier(){
  if(points >= 100) spawnModifier = 2; // +100%
  else if(points >=50) spawnModifier = 1.25;
  else if(points >=25) spawnModifier = 1.25;
  else if(points >=10) spawnModifier = 1.25;
  else spawnModifier = 1;
}

// Create Emoji
function createEmoji(){
  const availableEmojis = emojis.filter(e => points >= e.minPoints);
  if(availableEmojis.length===0) return;

  const e = availableEmojis[Math.floor(Math.random()*availableEmojis.length)];
  const emojiDiv = document.createElement('div');
  emojiDiv.className = 'emoji';
  emojiDiv.textContent = e.symbol;

  // Random starting side
  let side = Math.random() < 0.5 ? 'left':'right';
  emojiDiv.style.top = Math.random()*(window.innerHeight-100) + 'px';
  emojiDiv.style[side] = '-50px';

  gameContainer.appendChild(emojiDiv);

  let pos = parseFloat(emojiDiv.style.top);
  let left = side==='left'? -50: window.innerWidth+50;
  const direction = side==='left'? 1:-1;

  let lifetime = 5000 + Math.random()*2000;

  let moveInterval = setInterval(()=>{
    // Movement
    if(e.type==='fall') pos += e.speed; 
    else if(e.type==='rise') pos -= e.speed;
    else if(e.type==='shuffle') left += e.speed*direction; 
    else if(e.type==='zigzag'){ 
      left += e.speed*direction; 
      pos += Math.sin(left/20)*5;
    } 
    else if(e.type==='blink'){ 
      // appear/disappear randomly
      emojiDiv.style.display = Math.random()>0.5?'block':'none';
    } 
    else if(e.type==='random'){ 
      left += (Math.random()*4-2); pos += (Math.random()*4-2); 
    }
    emojiDiv.style.top = pos+'px';
    emojiDiv.style.left = left+'px';
  },50);

  // Remove after lifetime
  setTimeout(()=>{
    clearInterval(moveInterval);
    emojiDiv.remove();
  },lifetime);

  // Click points
  emojiDiv.addEventListener('click', ()=>{
    if(e.symbol==='ðŸ‘»'){
      if(activeGhostClicks < e.maxClicks){ 
        points += e.points;
        activeGhostClicks++;
      }
    } else points += e.points;

    showFloatingText(e.symbol==='ðŸ‘»'?'+1':`+${e.points}`, emojiDiv);
    updateScore();
    emojiDiv.remove();
  });
}

// Floating text
function showFloatingText(text, el){
  const t = document.createElement('div');
  t.className='floating-text';
  t.textContent = text;
  t.style.left = el.offsetLeft+'px';
  t.style.top = el.offsetTop+'px';
  gameContainer.appendChild(t);
  setTimeout(()=>t.remove(),1000);
}

// Update score & milestone
function updateScore(){
  scoreBoard.textContent = `Points: ${points}`;
  updateSpawnModifier();
  updateGrave();
}

// Grave messages
function updateGrave(){
  if(points >=10 && points <25) graveMsg.innerHTML='Your story echoes in the graveyard...';
  else if(points >=25 && points <50) graveMsg.innerHTML='Local legend: Owen the remarkable.';
  else if(points >=50 && points <100) graveMsg.innerHTML='Owen, eternal in fame and memory.';
  else if(points >=100) graveMsg.innerHTML='The century man prevails beyond life!';
}

// Info Box
document.getElementById('info-btn').addEventListener('click',()=>{ document.getElementById('info-box').style.display='block';});
function closeInfo(){ document.getElementById('info-box').style.display='none';}

// Spawn loop
setInterval(()=>{
  createEmoji();
}, spawnInterval/spawnModifier);
</script>

</body>
</html>
